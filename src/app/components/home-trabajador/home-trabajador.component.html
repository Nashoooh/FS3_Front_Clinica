<div class="home-container">
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="brand">
        <h1>Clinimed</h1>
        <span class="subtitle">Panel de Trabajador</span>
      </div>
      <div class="user-info">
        <div class="user-details">
          <span class="user-name">{{ usuario?.nombre }} {{ usuario?.apellido }}</span>
          <span class="user-role">Trabajador</span>
        </div>
        <button class="logout-btn" (click)="logout()">
          <span class="logout-icon">ğŸšª</span>
          Cerrar SesiÃ³n
        </button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Welcome Section -->
    <section class="welcome-section">
      <div class="welcome-card">
        <h2>Â¡Bienvenido/a, {{ usuario?.nombre }}!</h2>
        <p class="welcome-message">
          Panel de administrador para gestionar pacientes, citas, exÃ¡menes y todo el sistema clÃ­nico.
        </p>
        <p class="current-time">{{ currentTime }}</p>
      </div>
    </section>

    <!-- Management Tools -->
    <section class="tools-section">
      <h3>Herramientas de GestiÃ³n</h3>
      <div class="tools-grid">
        <div class="tool-card primary" (click)="gestionarPacientes()">
          <div class="tool-icon">ğŸ‘¥</div>
          <h4>Gestionar Pacientes</h4>
          <p>Administrar informaciÃ³n de pacientes</p>
        </div>

        <div class="tool-card secondary" (click)="asignarExamenes()">
          <div class="tool-icon">ğŸ“‹</div>
          <h4>Asignar ExÃ¡menes</h4>
          <p>Seleccionar y asignar exÃ¡menes a pacientes</p>
        </div>

        <div class="tool-card tertiary" (click)="gestionarCitas()">
          <div class="tool-icon">ğŸ“…</div>
          <h4>Gestionar Citas</h4>
          <p>Programar y administrar citas mÃ©dicas</p>
        </div>

        <div class="tool-card" (click)="gestionarAnalisis()">
          <div class="tool-icon">ğŸ”¬</div>
          <h4>Gestionar AnÃ¡lisis</h4>
          <p>CRUD de tipos de anÃ¡lisis/exÃ¡menes</p>
        </div>

        <div class="tool-card" (click)="gestionarLaboratorios()">
          <div class="tool-icon">ğŸ¥</div>
          <h4>Gestionar Laboratorios</h4>
          <p>CRUD de laboratorios disponibles</p>
        </div>

        <div class="tool-card" (click)="gestionarResultados()">
          <div class="tool-icon">ğŸ“Š</div>
          <h4>Resultados</h4>
          <p>Cargar y gestionar resultados de exÃ¡menes</p>
        </div>

        <div class="tool-card" (click)="verReportes()">
          <div class="tool-icon">ğŸ“ˆ</div>
          <h4>Reportes</h4>
          <p>Generar reportes y estadÃ­sticas</p>
        </div>

        <div class="tool-card" (click)="editarPerfil()">
          <div class="tool-icon">ğŸ‘¤</div>
          <h4>Mi Perfil</h4>
          <p>Actualizar informaciÃ³n personal</p>
        </div>

        <div class="tool-card" (click)="configuracion()">
          <div class="tool-icon">âš™ï¸</div>
          <h4>ConfiguraciÃ³n</h4>
          <p>Configurar parÃ¡metros del sistema</p>
        </div>
      </div>
    </section>

    <!-- Statistics Section -->
    <section class="stats-section">
      <h3>Resumen del Sistema</h3>
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">ğŸ‘¥</div>
          <div class="stat-info">
            <h4>Pacientes Registrados</h4>
            <p class="stat-number">0</p>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">ğŸ“…</div>
          <div class="stat-info">
            <h4>Citas de Hoy</h4>
            <p class="stat-number">0</p>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">ğŸ”¬</div>
          <div class="stat-info">
            <h4>ExÃ¡menes Pendientes</h4>
            <p class="stat-number">0</p>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">ğŸ“Š</div>
          <div class="stat-info">
            <h4>Resultados por Revisar</h4>
            <p class="stat-number">0</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Recent Activity -->
    <section class="activity-section">
      <div class="activity-card">
        <h3>Actividad Reciente</h3>
        <div class="activity-list">
          <div class="activity-item">
            <div class="activity-icon">â„¹ï¸</div>
            <div class="activity-content">
              <p><strong>Sistema iniciado:</strong> No hay actividad reciente que mostrar</p>
              <span class="activity-time">Sistema inicializado</span>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <p>&copy; 2025 Clinimed - Sistema de GestiÃ³n de ClÃ­nicas y ExÃ¡menes</p>
      <p>Panel de AdministraciÃ³n - VersiÃ³n 1.0.0</p>
    </div>
  </footer>
</div>

<!-- Modal de GestiÃ³n de AnÃ¡lisis -->
<div *ngIf="showAnalisisModal" class="modal-backdrop" (click)="closeAnalisisModal()">
  <div class="modal-content-large" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>ğŸ”¬ GestiÃ³n de AnÃ¡lisis</h3>
      <button class="btn-close-modal" (click)="closeAnalisisModal()">âœ–</button>
    </div>
    
    <div class="modal-body-large">
      <!-- Tabs -->
      <div class="tabs">
        <button 
          [class.active]="analisisActiveTab === 'list'" 
          (click)="analisisActiveTab = 'list'; loadAnalisis()">
          ğŸ“‹ Lista
        </button>
        <button 
          [class.active]="analisisActiveTab === 'create'" 
          (click)="analisisActiveTab = 'create'; resetAnalisisForm()">
          â• Crear
        </button>
        <button 
          [class.active]="analisisActiveTab === 'search'" 
          (click)="analisisActiveTab = 'search'">
          ğŸ” Buscar por ID
        </button>
      </div>

      <!-- Mensajes -->
      <div *ngIf="analisisSuccessMessage" class="alert alert-success mt-3">
        {{ analisisSuccessMessage }}
      </div>
      <div *ngIf="analisisErrorMessage" class="alert alert-danger mt-3">
        {{ analisisErrorMessage }}
      </div>

      <!-- Tab: Lista -->
      <div *ngIf="analisisActiveTab === 'list'" class="tab-content">
        <div *ngIf="loadingAnalisis" class="text-center p-4">
          <div class="spinner-border"></div>
        </div>
        
        <div *ngIf="!loadingAnalisis" class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>DescripciÃ³n</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of analisisList">
                <td>{{ item.id }}</td>
                <td>{{ item.nombre }}</td>
                <td>{{ item.descripcion }}</td>
                <td>
                  <button class="btn btn-sm btn-warning me-2" (click)="editAnalisis(item)">
                    âœï¸ Editar
                  </button>
                  <button class="btn btn-sm btn-danger" (click)="deleteAnalisis(item.id)">
                    ğŸ—‘ï¸ Eliminar
                  </button>
                </td>
              </tr>
              <tr *ngIf="analisisList.length === 0">
                <td colspan="4" class="text-center">No hay anÃ¡lisis registrados</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Tab: Crear/Editar -->
      <div *ngIf="analisisActiveTab === 'create'" class="tab-content">
        <form>
          <div class="form-group mb-3">
            <label for="analisisNombre">Nombre del AnÃ¡lisis *</label>
            <input 
              type="text" 
              id="analisisNombre" 
              class="form-control" 
              [(ngModel)]="currentAnalisis.nombre"
              name="nombre"
              placeholder="Ej: Hemograma Completo">
          </div>

          <div class="form-group mb-3">
            <label for="analisisDescripcion">DescripciÃ³n *</label>
            <textarea 
              id="analisisDescripcion" 
              class="form-control" 
              [(ngModel)]="currentAnalisis.descripcion"
              name="descripcion"
              rows="3"
              placeholder="Describe el anÃ¡lisis..."></textarea>
          </div>

          <div class="d-flex gap-2">
            <button 
              type="button"
              class="btn btn-primary" 
              (click)="saveAnalisis()"
              [disabled]="loadingAnalisis || !currentAnalisis.nombre || !currentAnalisis.descripcion">
              <span *ngIf="loadingAnalisis" class="spinner-border spinner-border-sm me-2"></span>
              {{ isEditingAnalisis ? 'ğŸ’¾ Actualizar' : 'â• Crear' }}
            </button>
            <button 
              type="button"
              class="btn btn-secondary" 
              (click)="resetAnalisisForm()">
              ğŸ”„ Limpiar
            </button>
          </div>
        </form>
      </div>

      <!-- Tab: Buscar -->
      <div *ngIf="analisisActiveTab === 'search'" class="tab-content">
        <div class="form-group mb-3">
          <label for="analisisSearchId">ID del AnÃ¡lisis</label>
          <div class="input-group">
            <input 
              type="number" 
              id="analisisSearchId" 
              class="form-control" 
              [(ngModel)]="searchAnalisisId"
              placeholder="Ingresa el ID...">
            <button 
              class="btn btn-primary" 
              (click)="searchAnalisisById()"
              [disabled]="loadingAnalisis || !searchAnalisisId">
              <span *ngIf="loadingAnalisis" class="spinner-border spinner-border-sm me-2"></span>
              ğŸ” Buscar
            </button>
          </div>
        </div>

        <div *ngIf="searchedAnalisis" class="card p-3">
          <h5>Resultado de la bÃºsqueda:</h5>
          <p><strong>ID:</strong> {{ searchedAnalisis.id }}</p>
          <p><strong>Nombre:</strong> {{ searchedAnalisis.nombre }}</p>
          <p><strong>DescripciÃ³n:</strong> {{ searchedAnalisis.descripcion }}</p>
          <div class="mt-3">
            <button class="btn btn-warning me-2" (click)="editAnalisis(searchedAnalisis)">
              âœï¸ Editar
            </button>
            <button class="btn btn-danger" (click)="deleteAnalisis(searchedAnalisis.id)">
              ğŸ—‘ï¸ Eliminar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de GestiÃ³n de Laboratorios -->
<div *ngIf="showLaboratoriosModal" class="modal-backdrop" (click)="closeLaboratoriosModal()">
  <div class="modal-content-large" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>ğŸ¥ GestiÃ³n de Laboratorios</h3>
      <button class="btn-close-modal" (click)="closeLaboratoriosModal()">âœ–</button>
    </div>
    
    <div class="modal-body-large">
      <!-- Tabs -->
      <div class="tabs">
        <button 
          [class.active]="laboratoriosActiveTab === 'list'" 
          (click)="laboratoriosActiveTab = 'list'; loadLaboratorios()">
          ğŸ“‹ Lista
        </button>
        <button 
          [class.active]="laboratoriosActiveTab === 'create'" 
          (click)="laboratoriosActiveTab = 'create'; resetLaboratorioForm()">
          â• Crear
        </button>
        <button 
          [class.active]="laboratoriosActiveTab === 'search'" 
          (click)="laboratoriosActiveTab = 'search'">
          ğŸ” Buscar por ID
        </button>
      </div>

      <!-- Mensajes -->
      <div *ngIf="laboratoriosSuccessMessage" class="alert alert-success mt-3">
        {{ laboratoriosSuccessMessage }}
      </div>
      <div *ngIf="laboratoriosErrorMessage" class="alert alert-danger mt-3">
        {{ laboratoriosErrorMessage }}
      </div>

      <!-- Tab: Lista -->
      <div *ngIf="laboratoriosActiveTab === 'list'" class="tab-content">
        <div *ngIf="loadingLaboratorios" class="text-center p-4">
          <div class="spinner-border"></div>
        </div>
        
        <div *ngIf="!loadingLaboratorios" class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>DirecciÃ³n</th>
                <th>TelÃ©fono</th>
                <th>UbicaciÃ³n</th>
                <th>Capacidad</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let lab of laboratoriosList">
                <td>{{ lab.id }}</td>
                <td>{{ lab.nombre }}</td>
                <td>{{ lab.direccion }}</td>
                <td>{{ lab.telefono || 'N/A' }}</td>
                <td>{{ lab.ubicacion || 'N/A' }}</td>
                <td>{{ lab.capacidad || 'N/A' }}</td>
                <td>
                  <button class="btn btn-sm btn-warning me-2" (click)="editLaboratorio(lab)">
                    âœï¸ Editar
                  </button>
                  <button class="btn btn-sm btn-danger" (click)="deleteLaboratorio(lab.id)">
                    ğŸ—‘ï¸ Eliminar
                  </button>
                </td>
              </tr>
              <tr *ngIf="laboratoriosList.length === 0">
                <td colspan="7" class="text-center">No hay laboratorios registrados</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Tab: Crear/Editar -->
      <div *ngIf="laboratoriosActiveTab === 'create'" class="tab-content">
        <form>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group mb-3">
                <label for="labNombre">Nombre del Laboratorio *</label>
                <input 
                  type="text" 
                  id="labNombre" 
                  class="form-control" 
                  [(ngModel)]="currentLaboratorio.nombre"
                  name="nombre"
                  placeholder="Ej: Laboratorio Central">
              </div>

              <div class="form-group mb-3">
                <label for="labDireccion">DirecciÃ³n *</label>
                <input 
                  type="text" 
                  id="labDireccion" 
                  class="form-control" 
                  [(ngModel)]="currentLaboratorio.direccion"
                  name="direccion"
                  placeholder="Ej: Av. Principal 123">
              </div>

              <div class="form-group mb-3">
                <label for="labTelefono">TelÃ©fono</label>
                <input 
                  type="text" 
                  id="labTelefono" 
                  class="form-control" 
                  [(ngModel)]="currentLaboratorio.telefono"
                  name="telefono"
                  placeholder="Ej: +56 2 2345 6789">
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-group mb-3">
                <label for="labUbicacion">UbicaciÃ³n</label>
                <input 
                  type="text" 
                  id="labUbicacion" 
                  class="form-control" 
                  [(ngModel)]="currentLaboratorio.ubicacion"
                  name="ubicacion"
                  placeholder="Ej: Santiago Centro">
              </div>

              <div class="form-group mb-3">
                <label for="labCapacidad">Capacidad</label>
                <input 
                  type="number" 
                  id="labCapacidad" 
                  class="form-control" 
                  [(ngModel)]="currentLaboratorio.capacidad"
                  name="capacidad"
                  placeholder="Ej: 50">
              </div>
            </div>
          </div>

          <div class="d-flex gap-2">
            <button 
              type="button"
              class="btn btn-primary" 
              (click)="saveLaboratorio()"
              [disabled]="loadingLaboratorios || !currentLaboratorio.nombre || !currentLaboratorio.direccion">
              <span *ngIf="loadingLaboratorios" class="spinner-border spinner-border-sm me-2"></span>
              {{ isEditingLaboratorio ? 'ğŸ’¾ Actualizar' : 'â• Crear' }}
            </button>
            <button 
              type="button"
              class="btn btn-secondary" 
              (click)="resetLaboratorioForm()">
              ğŸ”„ Limpiar
            </button>
          </div>
        </form>
      </div>

      <!-- Tab: Buscar -->
      <div *ngIf="laboratoriosActiveTab === 'search'" class="tab-content">
        <div class="form-group mb-3">
          <label for="labSearchId">ID del Laboratorio</label>
          <div class="input-group">
            <input 
              type="number" 
              id="labSearchId" 
              class="form-control" 
              [(ngModel)]="searchLaboratorioId"
              placeholder="Ingresa el ID...">
            <button 
              class="btn btn-primary" 
              (click)="searchLaboratorioById()"
              [disabled]="loadingLaboratorios || !searchLaboratorioId">
              <span *ngIf="loadingLaboratorios" class="spinner-border spinner-border-sm me-2"></span>
              ğŸ” Buscar
            </button>
          </div>
        </div>

        <div *ngIf="searchedLaboratorio" class="card p-3">
          <h5>Resultado de la bÃºsqueda:</h5>
          <p><strong>ID:</strong> {{ searchedLaboratorio.id }}</p>
          <p><strong>Nombre:</strong> {{ searchedLaboratorio.nombre }}</p>
          <p><strong>DirecciÃ³n:</strong> {{ searchedLaboratorio.direccion }}</p>
          <p><strong>TelÃ©fono:</strong> {{ searchedLaboratorio.telefono || 'N/A' }}</p>
          <p><strong>UbicaciÃ³n:</strong> {{ searchedLaboratorio.ubicacion || 'N/A' }}</p>
          <p><strong>Capacidad:</strong> {{ searchedLaboratorio.capacidad || 'N/A' }}</p>
          <div class="mt-3">
            <button class="btn btn-warning me-2" (click)="editLaboratorio(searchedLaboratorio)">
              âœï¸ Editar
            </button>
            <button class="btn btn-danger" (click)="deleteLaboratorio(searchedLaboratorio.id)">
              ğŸ—‘ï¸ Eliminar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de GestiÃ³n de ExÃ¡menes -->
<div *ngIf="showExamenesModal" class="modal-backdrop" (click)="closeExamenesModal()">
  <div class="modal-content-large" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>ğŸ“‹ GestiÃ³n de ExÃ¡menes</h3>
      <button class="btn-close-modal" (click)="closeExamenesModal()">âœ–</button>
    </div>
    
    <div class="modal-body-large">
      <!-- Tabs -->
      <div class="tabs">
        <button 
          [class.active]="examenesActiveTab === 'list'" 
          (click)="examenesActiveTab = 'list'; loadExamenes()">
          ğŸ“‹ Lista
        </button>
        <button 
          [class.active]="examenesActiveTab === 'create'" 
          (click)="examenesActiveTab = 'create'; resetExamenForm()">
          â• Crear
        </button>
        <button 
          [class.active]="examenesActiveTab === 'search'" 
          (click)="examenesActiveTab = 'search'">
          ğŸ” Buscar por ID
        </button>
      </div>

      <!-- Mensajes -->
      <div *ngIf="examenesSuccessMessage" class="alert alert-success mt-3">
        {{ examenesSuccessMessage }}
      </div>
      <div *ngIf="examenesErrorMessage" class="alert alert-danger mt-3">
        {{ examenesErrorMessage }}
      </div>

      <!-- Tab: Lista -->
      <div *ngIf="examenesActiveTab === 'list'" class="tab-content">
        <div *ngIf="loadingExamenes" class="text-center p-4">
          <div class="spinner-border"></div>
        </div>
        
        <div *ngIf="!loadingExamenes" class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>ID</th>
                <th>Paciente</th>
                <th>AnÃ¡lisis</th>
                <th>Laboratorio</th>
                <th>Fecha Examen</th>
                <th>Resultado</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let examen of examenesList">
                <td>{{ examen.id }}</td>
                <td>{{ examen.usuarioId }}</td>
                <td>{{ examen.analisisNombre || examen.analisisId }}</td>
                <td>{{ examen.laboratorioDireccion || examen.laboratorioId }}</td>
                <td>{{ examen.fechaExamen | date:'dd/MM/yyyy' }}</td>
                <td>{{ examen.resultado || 'Pendiente' }}</td>
                <td>
                  <button class="btn btn-sm btn-warning me-2" (click)="editExamen(examen)">
                    âœï¸ Editar
                  </button>
                  <button class="btn btn-sm btn-danger" (click)="deleteExamen(examen.id)">
                    ğŸ—‘ï¸ Eliminar
                  </button>
                </td>
              </tr>
              <tr *ngIf="examenesList.length === 0">
                <td colspan="7" class="text-center">No hay exÃ¡menes registrados</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Tab: Crear/Editar -->
      <div *ngIf="examenesActiveTab === 'create'" class="tab-content">
        <form>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group mb-3">
                <label for="examenPaciente">Paciente *</label>
                <select 
                  id="examenPaciente" 
                  class="form-control" 
                  [(ngModel)]="currentExamen.usuarioId"
                  name="usuarioId"
                  required>
                  <option [value]="0">Selecciona un paciente</option>
                  <option *ngFor="let paciente of pacientesList" [value]="paciente.id">
                    {{ paciente.nombre }} - {{ paciente.rut }}
                  </option>
                </select>
              </div>

              <div class="form-group mb-3">
                <label for="examenLaboratorio">Laboratorio *</label>
                <select 
                  id="examenLaboratorio" 
                  class="form-control" 
                  [(ngModel)]="currentExamen.laboratorioId"
                  name="laboratorioId"
                  required>
                  <option [value]="0">Selecciona un laboratorio</option>
                  <option *ngFor="let lab of laboratoriosListForExamen" [value]="lab.id">
                    {{ lab.nombre }} - {{ lab.direccion }}
                  </option>
                </select>
              </div>

              <div class="form-group mb-3">
                <label for="examenAnalisis">Tipo de AnÃ¡lisis *</label>
                <select 
                  id="examenAnalisis" 
                  class="form-control" 
                  [(ngModel)]="currentExamen.analisisId"
                  name="analisisId"
                  required>
                  <option [value]="0">Selecciona un anÃ¡lisis</option>
                  <option *ngFor="let analisis of analisisListForExamen" [value]="analisis.id">
                    {{ analisis.nombre }} - {{ analisis.descripcion }}
                  </option>
                </select>
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-group mb-3">
                <label for="examenFecha">Fecha del Examen *</label>
                <input 
                  type="date" 
                  id="examenFecha" 
                  class="form-control" 
                  [(ngModel)]="currentExamen.fechaExamen"
                  name="fechaExamen">
              </div>

              <div class="form-group mb-3">
                <label for="examenResultado">Resultado</label>
                <textarea 
                  id="examenResultado" 
                  class="form-control" 
                  [(ngModel)]="currentExamen.resultado"
                  name="resultado"
                  rows="3"
                  placeholder="Ej: Negativo, Positivo, etc."></textarea>
              </div>
            </div>
          </div>

          <div class="d-flex gap-2">
            <button 
              type="button"
              class="btn btn-primary" 
              (click)="saveExamen()"
              [disabled]="loadingExamenes || !currentExamen.usuarioId || !currentExamen.laboratorioId || !currentExamen.analisisId || !currentExamen.fechaExamen">
              <span *ngIf="loadingExamenes" class="spinner-border spinner-border-sm me-2"></span>
              {{ isEditingExamen ? 'ğŸ’¾ Actualizar' : 'â• Crear' }}
            </button>
            <button 
              type="button"
              class="btn btn-secondary" 
              (click)="resetExamenForm()">
              ğŸ”„ Limpiar
            </button>
          </div>
        </form>
      </div>

      <!-- Tab: Buscar -->
      <div *ngIf="examenesActiveTab === 'search'" class="tab-content">
        <div class="form-group mb-3">
          <label for="examenSearchId">ID del Examen</label>
          <div class="input-group">
            <input 
              type="number" 
              id="examenSearchId" 
              class="form-control" 
              [(ngModel)]="searchExamenId"
              placeholder="Ingresa el ID...">
            <button 
              class="btn btn-primary" 
              (click)="searchExamenById()"
              [disabled]="loadingExamenes || !searchExamenId">
              <span *ngIf="loadingExamenes" class="spinner-border spinner-border-sm me-2"></span>
              ğŸ” Buscar
            </button>
          </div>
        </div>

        <div *ngIf="searchedExamen" class="card p-3">
          <h5>Resultado de la bÃºsqueda:</h5>
          <p><strong>ID:</strong> {{ searchedExamen.id }}</p>
          <p><strong>Paciente:</strong> {{ searchedExamen.analisisNombre || 'ID: ' + searchedExamen.usuarioId }}</p>
          <p><strong>AnÃ¡lisis:</strong> {{ searchedExamen.analisisNombre || 'ID: ' + searchedExamen.analisisId }}</p>
          <p><strong>Laboratorio:</strong> {{ searchedExamen.laboratorioDireccion || 'ID: ' + searchedExamen.laboratorioId }}</p>
          <p><strong>Fecha Examen:</strong> {{ searchedExamen.fechaExamen | date:'dd/MM/yyyy' }}</p>
          <p><strong>Resultado:</strong> {{ searchedExamen.resultado || 'Pendiente' }}</p>
          <div class="mt-3">
            <button class="btn btn-warning me-2" (click)="editExamen(searchedExamen)">
              âœï¸ Editar
            </button>
            <button class="btn btn-danger" (click)="deleteExamen(searchedExamen.id)">
              ğŸ—‘ï¸ Eliminar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
